{% extends "base.html" %}

{% block content %}

<h3 class="mb-4" >ë‚˜ì˜ ë¦¬ë·°</h3>
<div class="search_bar mb-4">
  {% comment %} <form id="searchForm" onsubmit="return false;">
    <input
      type="text"
      id="searchInput"
      class="form-control"
      placeholder="ì˜í™” ì œëª©ìœ¼ë¡œ ê²€ìƒ‰"
    />
  </form> {% endcomment %}

  <form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <input type="submit" value="ê²€ìƒ‰" class="btn btn-primary btn-sm">
  </form>

</div>

<div class="mb-3">
  <strong>ì •ë ¬:</strong>
  <a href="?sort=latest" class="{% if sort == 'latest' %}fw-bold{% endif %}">ìµœì‹ ìˆœ</a> |
  <a href="?sort=rating" class="{% if sort == 'rating' %}fw-bold{% endif %}">í‰ì ìˆœ</a> |
  <a href="?sort=title" class="{% if sort == 'title' %}fw-bold{% endif %}">ì œëª©ìˆœ</a>
</div>


<a href="{% url 'reviewApp:create' %}" class="btn btn-primary mb-4">
  ë¦¬ë·° ì‘ì„±í•˜ê¸°
</a>

<a href="{% url 'reviewApp:chatbot' %}" class="btn btn-primary mb-4">
  ì±—ë´‡
</a>

<div class="review-list">
  {% for review in reviews %}
    <a href="{% url 'reviewApp:read' review.id %}" class="review-card-link">

      <div class="review-card d-flex gap-3">

        <!-- í¬ìŠ¤í„° -->
        {% if review.movie_poster %}
          <img
            src="{{ review.movie_poster }}"
            alt="{{ review.movie_title }}"
            style="width: 90px; height: auto; border-radius: 6px;"
          />
        {% endif %}

        <!-- í…ìŠ¤íŠ¸ ì˜ì—­ -->
        <div class="review-card-body">
          <h5 class="review-title">
            {{ review.movie_title }}
          </h5>

          <p class="review-meta">
            ğŸ¬ {{ review.release_year }} Â· {{ review.genre }}
          </p>

          <p class="review-rating">
            â­ {{ review.rating }} / 5.0
          </p>
        </div>

      </div>
    </a>
  {% empty %}
    <p>ì•„ì§ ì‘ì„±ëœ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
  {% endfor %}
</div>

<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center mt-4">

    {% if page_obj.has_previous %}
      <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.previous_page_number }}&sort={{ sort }}">ì´ì „</a>
      </li>
    {% endif %}

    {% for num in page_obj.paginator.page_range %}
      <li class="page-item {% if page_obj.number == num %}active{% endif %}">
        <a class="page-link" href="?page={{ num }}&sort={{ sort }}">
          {{ num }}
        </a>
      </li>
    {% endfor %}

    {% if page_obj.has_next %}
      <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.next_page_number }}&sort={{ sort }}">ë‹¤ìŒ</a>
      </li>
    {% endif %}

  </ul>
</nav>



{% endblock content %}
